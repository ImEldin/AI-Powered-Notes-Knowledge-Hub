<div *ngIf="!resetSuccess">
  <h2>Reset Password</h2>
  <p>Enter your new password below.</p>

  <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
    <div>
      <label>New Password:</label>
      <input
        [type]="hidePassword ? 'password' : 'text'"
        formControlName="newPassword"
      />
      <button type="button" (click)="togglePasswordVisibility()">
        {{ hidePassword ? "Show" : "Hide" }}
      </button>
      <div
        *ngIf="
          resetPasswordForm.get('newPassword')?.invalid &&
          resetPasswordForm.get('newPassword')?.touched
        "
      >
        <small style="color: red">{{ getPasswordError() }}</small>
      </div>
    </div>

    <div>
      <label>Confirm Password:</label>
      <input
        [type]="hideConfirmPassword ? 'password' : 'text'"
        formControlName="confirmPassword"
      />
      <button type="button" (click)="toggleConfirmPasswordVisibility()">
        {{ hideConfirmPassword ? "Show" : "Hide" }}
      </button>
      <div
        *ngIf="
          (resetPasswordForm.get('confirmPassword')?.invalid &&
            resetPasswordForm.get('confirmPassword')?.touched) ||
          resetPasswordForm.hasError('passwordMismatch')
        "
      >
        <small style="color: red">{{ getConfirmPasswordError() }}</small>
      </div>
    </div>

    <button type="submit" [disabled]="loading">
      {{ loading ? "Resetting..." : "Reset Password" }}
    </button>
  </form>

  <a routerLink="/auth/login">Back to Login</a>
</div>

<div *ngIf="resetSuccess">
  <h2>Password Reset Successful!</h2>
  <p>Your password has been successfully reset.</p>
  <p>Redirecting to login page...</p>
  <button (click)="goToLogin()">Go to Login</button>
</div>
